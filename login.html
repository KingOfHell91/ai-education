<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Math Tutor AI</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- AWS Amplify (optional, nur wenn USE_MOCK = false) -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/aws-amplify@5/dist/aws-amplify.min.js"></script> -->
</head>
<body class="login-page">
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-calculator"></i>
                <h1>Math Tutor AI</h1>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="login-main">
        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <h2 id="form-title">Anmelden</h2>
                    <p id="form-subtitle">Willkommen zurück! Melde dich an, um fortzufahren.</p>
                </div>

                <!-- Login Form -->
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="login-email">
                            <i class="fas fa-envelope"></i>
                            E-Mail-Adresse
                        </label>
                        <input 
                            type="email" 
                            id="login-email" 
                            placeholder="deine@email.de" 
                            required
                            autocomplete="email"
                        >
                    </div>

                    <div class="form-group">
                        <label for="login-password">
                            <i class="fas fa-lock"></i>
                            Passwort
                        </label>
                        <div class="password-input-wrapper">
                            <input 
                                type="password" 
                                id="login-password" 
                                placeholder="••••••••" 
                                required
                                autocomplete="current-password"
                            >
                            <button type="button" class="toggle-password" data-target="login-password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="remember-me">
                            <span>Angemeldet bleiben (30 Tage)</span>
                        </label>
                        <a href="#" id="forgot-password-link" class="link">Passwort vergessen?</a>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-sign-in-alt"></i>
                        Anmelden
                    </button>

                    <div class="form-divider">
                        <span>oder</span>
                    </div>

                    <button type="button" id="switch-to-register" class="btn btn-secondary btn-block">
                        <i class="fas fa-user-plus"></i>
                        Neues Konto erstellen
                    </button>
                </form>

                <!-- Register Form -->
                <form id="register-form" class="auth-form" style="display: none;">
                    <div class="form-group">
                        <label for="register-name">
                            <i class="fas fa-user"></i>
                            Name
                        </label>
                        <input 
                            type="text" 
                            id="register-name" 
                            placeholder="Dein Name" 
                            required
                            autocomplete="name"
                        >
                    </div>

                    <div class="form-group">
                        <label for="register-email">
                            <i class="fas fa-envelope"></i>
                            E-Mail-Adresse
                        </label>
                        <input 
                            type="email" 
                            id="register-email" 
                            placeholder="deine@email.de" 
                            required
                            autocomplete="email"
                        >
                    </div>

                    <div class="form-group">
                        <label for="register-password">
                            <i class="fas fa-lock"></i>
                            Passwort
                        </label>
                        <div class="password-input-wrapper">
                            <input 
                                type="password" 
                                id="register-password" 
                                placeholder="••••••••" 
                                required
                                autocomplete="new-password"
                            >
                            <button type="button" class="toggle-password" data-target="register-password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="password-strength" id="password-strength" style="display: none;">
                            <div class="strength-bar">
                                <div class="strength-bar-fill" id="strength-bar-fill"></div>
                            </div>
                            <div class="strength-text">
                                <span id="strength-label">Passwortstärke: </span>
                                <span id="strength-value">-</span>
                            </div>
                            <ul class="strength-requirements" id="strength-requirements"></ul>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="register-password-confirm">
                            <i class="fas fa-lock"></i>
                            Passwort bestätigen
                        </label>
                        <div class="password-input-wrapper">
                            <input 
                                type="password" 
                                id="register-password-confirm" 
                                placeholder="••••••••" 
                                required
                                autocomplete="new-password"
                            >
                            <button type="button" class="toggle-password" data-target="register-password-confirm">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="register-birthdate">
                            <i class="fas fa-birthday-cake"></i>
                            Geburtsdatum
                        </label>
                        <input 
                            type="date" 
                            id="register-birthdate" 
                            required
                            max=""
                        >
                        <small>Dein Geburtsdatum hilft uns, Inhalte an dein Alter anzupassen.</small>
                    </div>

                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="accept-terms" required>
                            <span>Ich akzeptiere die <a href="#" class="link">Nutzungsbedingungen</a></span>
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-user-plus"></i>
                        Registrieren
                    </button>

                    <div class="form-divider">
                        <span>oder</span>
                    </div>

                    <button type="button" id="switch-to-login" class="btn btn-secondary btn-block">
                        <i class="fas fa-sign-in-alt"></i>
                        Bereits ein Konto? Anmelden
                    </button>
                </form>

                <!-- Forgot Password Form -->
                <form id="forgot-password-form" class="auth-form" style="display: none;">
                    <div class="form-group">
                        <label for="forgot-email">
                            <i class="fas fa-envelope"></i>
                            E-Mail-Adresse
                        </label>
                        <input 
                            type="email" 
                            id="forgot-email" 
                            placeholder="deine@email.de" 
                            required
                            autocomplete="email"
                        >
                        <small>Wir senden dir einen Code zum Zurücksetzen deines Passworts.</small>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-paper-plane"></i>
                        Code anfordern
                    </button>

                    <button type="button" id="back-to-login" class="btn btn-secondary btn-block">
                        <i class="fas fa-arrow-left"></i>
                        Zurück zur Anmeldung
                    </button>
                </form>

                <!-- Reset Password Form (mit Code) -->
                <form id="reset-password-form" class="auth-form" style="display: none;">
                    <div class="form-group">
                        <label for="reset-code">
                            <i class="fas fa-key"></i>
                            Bestätigungscode
                        </label>
                        <input 
                            type="text" 
                            id="reset-code" 
                            placeholder="123456" 
                            required
                            maxlength="6"
                        >
                        <small>Prüfe deine E-Mail für den Bestätigungscode.</small>
                    </div>

                    <div class="form-group">
                        <label for="reset-new-password">
                            <i class="fas fa-lock"></i>
                            Neues Passwort
                        </label>
                        <div class="password-input-wrapper">
                            <input 
                                type="password" 
                                id="reset-new-password" 
                                placeholder="••••••••" 
                                required
                                autocomplete="new-password"
                            >
                            <button type="button" class="toggle-password" data-target="reset-new-password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-check"></i>
                        Passwort zurücksetzen
                    </button>

                    <button type="button" id="back-to-login-from-reset" class="btn btn-secondary btn-block">
                        <i class="fas fa-arrow-left"></i>
                        Zurück zur Anmeldung
                    </button>
                </form>

                <!-- Loading Indicator -->
                <div class="auth-loading" id="auth-loading" style="display: none;">
                    <div class="spinner"></div>
                    <p id="loading-message">Wird verarbeitet...</p>
                </div>

                <!-- Message Display -->
                <div class="auth-message" id="auth-message" style="display: none;"></div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Adaptive Math Tutoring Assistant. Alle Rechte vorbehalten.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="config/aws-config.js"></script>
    <script src="auth/auth-mock.js"></script>
    <script src="auth/auth-service.js"></script>
    <script src="login-script.js"></script>
</body>
</html>

